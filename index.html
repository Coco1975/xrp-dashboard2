<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crypto Command Centre</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#080c12; --bg2:#0d1420; --bg3:#111b2d;
  --border:#1e2f4a; --text:#c8ddf0; --muted:#4a6a8a;
  --green:#00e8a0; --red:#ff3d6b; --yellow:#ffd24d;
}
* { box-sizing:border-box; margin:0; padding:0; }
body {
  font-family:'Rajdhani',sans-serif;
  background:var(--bg); color:var(--text);
  min-height:100vh; overflow-x:hidden;
}
body::after {
  content:''; position:fixed; inset:0; pointer-events:none; z-index:0;
  background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,200,255,0.008) 2px,rgba(0,200,255,0.008) 4px);
}

/* ── HEADER ── */
header {
  position:relative; z-index:10;
  display:flex; align-items:center; justify-content:space-between;
  padding:16px 32px;
  border-bottom:1px solid var(--border);
  background:linear-gradient(90deg,#080c12,#0a1525,#080c12);
}
header::after {
  content:''; position:absolute; bottom:-1px; left:0; right:0; height:1px;
  background:linear-gradient(90deg,transparent,#00c8ff,transparent);
}
.site-title { font-size:22px; font-weight:700; letter-spacing:5px; color:#00c8ff; text-shadow:0 0 20px #00c8ff66; }
.site-sub   { font-size:10px; letter-spacing:3px; color:var(--muted); font-family:'Share Tech Mono',monospace; margin-top:-2px; }
.htime { font-family:'Share Tech Mono',monospace; font-size:12px; color:var(--muted); text-align:right; line-height:1.8; }
.live-dot { display:inline-block; width:7px; height:7px; border-radius:50%; margin-right:5px; background:var(--green); box-shadow:0 0 7px var(--green); animation:blink 1.5s infinite; }
@keyframes blink{0%,100%{opacity:1}50%{opacity:0.15}}

/* ── MARKET TICKER BAR ── */
.ticker-bar {
  position:relative; z-index:10;
  display:flex; gap:0; overflow-x:auto; scrollbar-width:none;
  border-bottom:1px solid var(--border);
  background:var(--bg3);
}
.ticker-bar::-webkit-scrollbar { display:none; }
.tick-item {
  flex-shrink:0; display:flex; align-items:center; gap:8px;
  padding:7px 18px; border-right:1px solid var(--border);
  font-family:'Share Tech Mono',monospace; font-size:11px;
}
.tick-sym  { color:#00c8ff; letter-spacing:1px; font-weight:700; }
.tick-price{ color:var(--text); }
.tick-chg  { font-size:10px; }
.up  { color:var(--green); }
.down{ color:var(--red);   }

/* ── MAIN CONTENT ── */
main {
  position:relative; z-index:5;
  max-width:1200px; margin:0 auto;
  padding:40px 24px;
}
.section-title {
  font-family:'Share Tech Mono',monospace; font-size:11px;
  letter-spacing:4px; color:var(--muted); margin-bottom:24px;
  display:flex; align-items:center; gap:14px;
}
.section-title::after { content:''; flex:1; height:1px; background:var(--border); }

/* ── COIN GRID ── */
.grid {
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(300px, 1fr));
  gap:20px;
  margin-bottom:48px;
}

.card {
  display:block; text-decoration:none; color:inherit;
  background:var(--bg2);
  border:1px solid var(--border);
  border-radius:10px;
  padding:22px;
  position:relative; overflow:hidden;
  transition:transform .2s, border-color .2s, box-shadow .2s;
  cursor:pointer;
}
.card::before {
  content:''; position:absolute; top:0; left:0; right:0; height:2px;
  background:var(--card-color, #00c8ff);
  opacity:0.7; transition:opacity .2s;
}
.card::after {
  content:''; position:absolute; top:-60px; right:-60px;
  width:160px; height:160px; border-radius:50%;
  background:radial-gradient(circle, var(--card-color, #00c8ff) 0%, transparent 70%);
  opacity:0.04; transition:opacity .2s;
}
.card:hover { transform:translateY(-3px); border-color:var(--card-color, #00c8ff); box-shadow:0 8px 32px rgba(0,0,0,0.4), 0 0 20px var(--card-glow, rgba(0,200,255,0.1)); }
.card:hover::before { opacity:1; }
.card:hover::after  { opacity:0.08; }

.card-head { display:flex; align-items:center; gap:14px; margin-bottom:18px; }
.coin-icon {
  width:44px; height:44px; border-radius:10px;
  display:flex; align-items:center; justify-content:center;
  font-family:'Share Tech Mono',monospace; font-size:11px; font-weight:700;
  color:#fff; letter-spacing:-0.5px; flex-shrink:0;
  box-shadow:0 4px 14px rgba(0,0,0,0.4);
}
.coin-names { flex:1; min-width:0; }
.coin-sym  { font-size:18px; font-weight:700; letter-spacing:2px; color:var(--card-color, #00c8ff); }
.coin-name { font-size:11px; letter-spacing:2px; color:var(--muted); font-family:'Share Tech Mono',monospace; }
.card-badge {
  font-family:'Share Tech Mono',monospace; font-size:9px; letter-spacing:1px;
  padding:3px 8px; border-radius:3px; border:1px solid var(--border);
  color:var(--muted); background:var(--bg3);
}

.card-price { font-size:26px; font-weight:700; margin-bottom:4px; color:var(--text); }
.card-chg   { font-size:13px; font-family:'Share Tech Mono',monospace; margin-bottom:16px; }

.card-stats { display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-bottom:18px; }
.cs { background:var(--bg3); border-radius:5px; padding:8px 10px; }
.cs-lbl { font-size:9px; letter-spacing:2px; color:var(--muted); font-family:'Share Tech Mono',monospace; }
.cs-val { font-size:13px; font-weight:600; color:var(--text); margin-top:2px; }

.card-footer {
  display:flex; align-items:center; justify-content:space-between;
  padding-top:14px; border-top:1px solid var(--border);
}
.open-btn {
  font-family:'Share Tech Mono',monospace; font-size:10px; letter-spacing:2px;
  color:var(--card-color, #00c8ff); display:flex; align-items:center; gap:6px;
}
.open-btn::after { content:'→'; transition:transform .2s; }
.card:hover .open-btn::after { transform:translateX(4px); }
.last-update { font-family:'Share Tech Mono',monospace; font-size:9px; color:var(--muted); }

/* Sparkline mini canvas */
.sparkline { width:100%; height:40px; display:block; margin-bottom:14px; }

/* ── FOOTER ── */
footer {
  position:relative; z-index:5;
  text-align:center; padding:24px;
  border-top:1px solid var(--border);
  font-family:'Share Tech Mono',monospace; font-size:10px;
  letter-spacing:2px; color:var(--muted);
}
footer span { color:#00c8ff; }

@media(max-width:600px){
  header { padding:12px 16px; }
  .site-title { font-size:16px; letter-spacing:3px; }
  main { padding:24px 14px; }
  .grid { grid-template-columns:1fr; gap:14px; }
}
</style>
</head>
<body>

<header>
  <div>
    <div class="site-title">CRYPTO COMMAND CENTRE</div>
    <div class="site-sub">PERSONAL PORTFOLIO DASHBOARD</div>
  </div>
  <div class="htime">
    <div><span class="live-dot"></span><span id="clock">--:--:--</span></div>
    <div id="cdate" style="font-size:10px;"></div>
  </div>
</header>

<!-- Live ticker bar -->
<div class="ticker-bar" id="ticker">
  <div class="tick-item"><span class="tick-sym">XRP</span><span class="tick-price" id="tk-XRP-p">—</span><span class="tick-chg" id="tk-XRP-c">—</span></div>
  <div class="tick-item"><span class="tick-sym">BTC</span><span class="tick-price" id="tk-BTC-p">—</span><span class="tick-chg" id="tk-BTC-c">—</span></div>
  <div class="tick-item"><span class="tick-sym">ETH</span><span class="tick-price" id="tk-ETH-p">—</span><span class="tick-chg" id="tk-ETH-c">—</span></div>
  <div class="tick-item"><span class="tick-sym">SOL</span><span class="tick-price" id="tk-SOL-p">—</span><span class="tick-chg" id="tk-SOL-c">—</span></div>
  <div class="tick-item"><span class="tick-sym">XLM</span><span class="tick-price" id="tk-XLM-p">—</span><span class="tick-chg" id="tk-XLM-c">—</span></div>
  <div class="tick-item"><span class="tick-sym">HBAR</span><span class="tick-price" id="tk-HBAR-p">—</span><span class="tick-chg" id="tk-HBAR-c">—</span></div>
  <div class="tick-item"><span class="tick-sym">CCD</span><span class="tick-price" id="tk-CCD-p">—</span><span class="tick-chg" id="tk-CCD-c">—</span></div>
</div>

<main>
  <div class="section-title">// MY PORTFOLIO</div>
  <div class="grid" id="grid"></div>
</main>

<footer>CRYPTO COMMAND CENTRE &nbsp;·&nbsp; DATA BY <span>COINGECKO</span> &nbsp;·&nbsp; PRICES UPDATE EVERY MINUTE</footer>

<script>
(function(){
'use strict';

/* ── COIN DEFINITIONS ── */
var COINS = [
  { sym:'XRP',  name:'Ripple XRP',       cgId:'ripple',            color:'#00c8ff', color2:'#0077aa', file:'xrp-dashboard.html',  decimals:4 },
  { sym:'BTC',  name:'Bitcoin',          cgId:'bitcoin',           color:'#f7931a', color2:'#c27615', file:'btc-dashboard.html',  decimals:2 },
  { sym:'ETH',  name:'Ethereum',         cgId:'ethereum',          color:'#627eea', color2:'#3d5bbf', file:'eth-dashboard.html',  decimals:2 },
  { sym:'SOL',  name:'Solana',           cgId:'solana',            color:'#9945ff', color2:'#7a35cc', file:'sol-dashboard.html',  decimals:4 },
  { sym:'XLM',  name:'Stellar',          cgId:'stellar',           color:'#14b6e7', color2:'#0d8ab0', file:'xlm-dashboard.html',  decimals:5 },
  { sym:'HBAR', name:'Hedera',           cgId:'hedera-hashgraph',  color:'#00a79d', color2:'#007a72', file:'hbar-dashboard.html', decimals:5 },
  { sym:'CCD',  name:'Concordium',       cgId:'concordium',        color:'#e8823a', color2:'#c0601a', file:'ccd-dashboard.html',  decimals:5 },
];

/* ── CLOCK ── */
function tick(){
  var n = new Date();
  var ce = document.getElementById('clock'), de = document.getElementById('cdate');
  if(ce) ce.textContent = n.toLocaleTimeString('en-GB');
  if(de) de.textContent = n.toLocaleDateString('en-GB',{weekday:'short',year:'numeric',month:'short',day:'numeric'});
}
tick(); setInterval(tick, 1000);

function fmt(n){ return n>=1e9?(n/1e9).toFixed(2)+'B':n>=1e6?(n/1e6).toFixed(1)+'M':n>=1e3?(n/1e3).toFixed(1)+'K':n.toFixed(2); }
function fp(n, d){ return '$'+n.toFixed(d); }

/* ── BUILD CARDS (empty first, fill with data) ── */
function buildCards(){
  var grid = document.getElementById('grid');
  COINS.forEach(function(coin){
    var card = document.createElement('a');
    card.href = coin.file;
    card.className = 'card';
    card.style.setProperty('--card-color', coin.color);
    card.style.setProperty('--card-glow', 'rgba('+hexToRgb(coin.color)+',0.12)');
    card.id = 'card-'+coin.sym;
    card.innerHTML =
      '<div class="card-head">'
        +'<div class="coin-icon" style="background:linear-gradient(135deg,'+coin.color+','+coin.color2+');box-shadow:0 4px 14px '+coin.color+'44">'+coin.sym+'</div>'
        +'<div class="coin-names"><div class="coin-sym">'+coin.sym+'</div><div class="coin-name">'+coin.name+'</div></div>'
        +'<div class="card-badge" id="badge-'+coin.sym+'">LOADING</div>'
      +'</div>'
      +'<div class="card-price" id="price-'+coin.sym+'">—</div>'
      +'<div class="card-chg"   id="chg-'+coin.sym+'">—</div>'
      +'<canvas class="sparkline" id="spark-'+coin.sym+'"></canvas>'
      +'<div class="card-stats">'
        +'<div class="cs"><div class="cs-lbl">VOLUME 24H</div><div class="cs-val" id="vol-'+coin.sym+'">—</div></div>'
        +'<div class="cs"><div class="cs-lbl">MKT CAP</div><div class="cs-val"    id="mcap-'+coin.sym+'">—</div></div>'
      +'</div>'
      +'<div class="card-footer">'
        +'<div class="open-btn">OPEN DASHBOARD</div>'
        +'<div class="last-update" id="upd-'+coin.sym+'">—</div>'
      +'</div>';
    grid.appendChild(card);
  });
}

function hexToRgb(hex){
  var r = parseInt(hex.slice(1,3),16);
  var g = parseInt(hex.slice(3,5),16);
  var b = parseInt(hex.slice(5,7),16);
  return r+','+g+','+b;
}

/* ── SPARKLINE ── */
function drawSpark(id, prices, color){
  var cv = document.getElementById('spark-'+id);
  if(!cv) return;
  var w = cv.offsetWidth || 260, h = 40;
  var dpr = window.devicePixelRatio||1;
  cv.width = w*dpr; cv.height = h*dpr;
  cv.style.width = w+'px'; cv.style.height = h+'px';
  var ctx = cv.getContext('2d');
  ctx.setTransform(dpr,0,0,dpr,0,0);
  if(!prices || prices.length < 2) return;
  var mn = Math.min.apply(null,prices), mx = Math.max.apply(null,prices);
  if(mx===mn){ mx=mn+0.01; }
  var pad = 3;
  function px(i){ return pad + (i/(prices.length-1))*(w-pad*2); }
  function py(v){ return h - pad - ((v-mn)/(mx-mn))*(h-pad*2); }
  // Gradient fill
  var grad = ctx.createLinearGradient(0,0,0,h);
  grad.addColorStop(0, color+'55');
  grad.addColorStop(1, color+'00');
  ctx.beginPath();
  ctx.moveTo(px(0), py(prices[0]));
  for(var i=1;i<prices.length;i++) ctx.lineTo(px(i), py(prices[i]));
  ctx.lineTo(px(prices.length-1), h);
  ctx.lineTo(px(0), h);
  ctx.closePath();
  ctx.fillStyle = grad;
  ctx.fill();
  // Line
  ctx.beginPath();
  ctx.moveTo(px(0), py(prices[0]));
  for(var i=1;i<prices.length;i++) ctx.lineTo(px(i), py(prices[i]));
  ctx.strokeStyle = color;
  ctx.lineWidth = 1.5;
  ctx.stroke();
}

/* ── FETCH ALL PRICES ── */
async function fetchAllPrices(){
  var ids = COINS.map(function(c){ return c.cgId; }).join(',');
  try{
    var res = await fetch('https://api.coingecko.com/api/v3/simple/price?ids='+ids+'&vs_currencies=usd&include_24hr_change=true&include_24hr_vol=true&include_market_cap=true');
    if(!res.ok) throw new Error('HTTP '+res.status);
    var data = await res.json();
    var now = new Date().toLocaleTimeString('en-GB');

    COINS.forEach(function(coin){
      var d = data[coin.cgId];
      if(!d) return;
      var p = d.usd, chg = d.usd_24h_change, vol = d.usd_24h_vol, mcap = d.usd_market_cap;
      var up = chg >= 0, sign = up?'+':'';

      // Card
      var pe = document.getElementById('price-'+coin.sym);
      var ce = document.getElementById('chg-'+coin.sym);
      var ve = document.getElementById('vol-'+coin.sym);
      var me = document.getElementById('mcap-'+coin.sym);
      var be = document.getElementById('badge-'+coin.sym);
      var ue = document.getElementById('upd-'+coin.sym);
      if(pe) pe.textContent = fp(p, coin.decimals);
      if(pe) pe.style.color = up ? 'var(--green)' : 'var(--red)';
      if(ce){ ce.textContent = sign+chg.toFixed(2)+'%'; ce.className = 'card-chg '+(up?'up':'down'); }
      if(ve) ve.textContent = '$'+fmt(vol);
      if(me) me.textContent = '$'+fmt(mcap);
      if(be){ be.textContent = up?'▲ UP':'▼ DOWN'; be.style.color = up?'var(--green)':'var(--red)'; be.style.borderColor = up?'rgba(0,232,160,0.3)':'rgba(255,61,107,0.3)'; }
      if(ue) ue.textContent = now;

      // Ticker bar
      var tp = document.getElementById('tk-'+coin.sym+'-p');
      var tc = document.getElementById('tk-'+coin.sym+'-c');
      if(tp) tp.textContent = fp(p, coin.decimals);
      if(tc){ tc.textContent = ' '+sign+chg.toFixed(2)+'%'; tc.className = 'tick-chg '+(up?'up':'down'); }
    });
  } catch(e){ console.warn('Price fetch failed:', e.message); }
}

/* ── FETCH SPARKLINES (7d price history) ── */
async function fetchSparklines(){
  // Fetch one at a time to avoid rate limits
  for(var i=0; i<COINS.length; i++){
    var coin = COINS[i];
    try{
      var res = await fetch('https://api.coingecko.com/api/v3/coins/'+coin.cgId+'/market_chart?vs_currency=usd&days=7&interval=daily');
      if(!res.ok) continue;
      var j = await res.json();
      if(!j.prices || !j.prices.length) continue;
      var prices = j.prices.map(function(p){ return +p[1]; });
      drawSpark(coin.sym, prices, coin.color);
    } catch(e){ /* silent */ }
    // Small delay between requests to be polite to the API
    await new Promise(function(r){ setTimeout(r, 400); });
  }
}

/* ── BOOT ── */
buildCards();
fetchAllPrices();
fetchSparklines();
setInterval(fetchAllPrices, 60000);

})();
</script>
</body>
</html>
